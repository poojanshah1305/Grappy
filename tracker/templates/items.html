{% extends 'base.html' %}
{% load humanize %}
{% load crispy_forms_tags %}
{% block script %}
<script>

       
            Chart.defaults.global.defaultFontSize = 14

            let today_items = "{{today_items}}"

            console.log(today_items.length)
            if(today_items.length>1)
            {

                var myChart = document.getElementById('myChart').getContext('2d');
                var myChart = new Chart(myChart, {
                type: 'bar',
                data: {
                    labels: [{% for item in today_items %}'{{ item.name }}',{% endfor %}],
                    datasets: [{
                        label: 'Price',
                        data: [{% for item in today_items %}{{ item.price }},{% endfor %}],
                        backgroundColor: [
                            'rgba(255, 99, 132, 0.5)',
                            'rgba(54, 162, 235, 0.5)',
                            'rgba(255, 206, 86, 0.5)',
                            'rgba(75, 192, 192, 0.5)',
                            'rgba(153, 102, 255, 0.5)',
                            'rgba(255, 159, 64, 0.5)'
                        ],
                        borderColor: [
                            'rgba(255, 99, 132, 1)',
                            'rgba(54, 162, 235, 1)',
                            'rgba(255, 206, 86, 1)',
                            'rgba(75, 192, 192, 1)',
                            'rgba(153, 102, 255, 1)',
                            'rgba(255, 159, 64, 1)'
                        ],
                        borderWidth: 2,
                        hoverBorderWidth: 3
                    }]
                },
                options: {
                    title: {
                        display: true,
                        text: "Today's Expense",
                        fontSize: 20
                    },

                    scales: {
                        yAxes: [{
                            ticks: {
                                beginAtZero: true
                            }
                        }]
                    }
                }
            });
          }

var ctx = document.getElementById('barChart').getContext('2d');
var myChart = new Chart(ctx, {
    type: 'bar',
    data: {
      labels: [{% for item in today_items %}'{{ item.name }}',{% endfor %}],
      datasets: [{
          label: 'Price',
          data: [{% for item in today_items %}{{ item.price }},{% endfor %}],
          backgroundColor: [
              'rgba(255, 99, 132, 0.2)',
              'rgba(54, 162, 235, 0.2)',
              'rgba(255, 206, 86, 0.2)',
              'rgba(75, 192, 192, 0.2)',
              'rgba(153, 102, 255, 0.2)',
              'rgba(255, 159, 64, 0.2)'
          ],
          borderColor: [
              'rgba(255, 99, 132, 1)',
              'rgba(54, 162, 235, 1)',
              'rgba(255, 206, 86, 1)',
              'rgba(75, 192, 192, 1)',
              'rgba(153, 102, 255, 1)',
              'rgba(255, 159, 64, 1)'
          ],
          borderWidth: 1
      }]
  },
    options: {
        scales: {
            y: {
                beginAtZero: true
            },
            gridLines: {
          display: false
        }
        },
         xAxes: [{
        ticks: {
          min: 0,
        },
        gridLines: {
          color: "rgba(0, 0, 0, .125)",
        }
      }],
       
    }  
});

var ctx = document.getElementById('lineChart').getContext('2d');
var myChart = new Chart(ctx, {
    type: 'line',
    data: {
      labels: [{% for item in today_items %}'{{ item.name }}',{% endfor %}],
      datasets: [{
          label: 'Price',
          data: [{% for item in today_items %}{{ item.price }},{% endfor %}],
          backgroundColor: [
              'rgba(255, 99, 132, 0.2)',
              'rgba(54, 162, 235, 0.2)',
              'rgba(255, 206, 86, 0.2)',
              'rgba(75, 192, 192, 0.2)',
              'rgba(153, 102, 255, 0.2)',
              'rgba(255, 159, 64, 0.2)'
          ],
          borderColor: [
              'rgba(255, 99, 132, 1)',
              'rgba(54, 162, 235, 1)',
              'rgba(255, 206, 86, 1)',
              'rgba(75, 192, 192, 1)',
              'rgba(153, 102, 255, 1)',
              'rgba(255, 159, 64, 1)'
          ],
          borderWidth: 1
      }]
  },
    options: {
        scales: {
            y: {
                beginAtZero: true
            },
            gridLines: {
          display: false
        }
        },
         xAxes: [{
        ticks: {
          min: 0,
        },
        gridLines: {
          color: "rgba(0, 0, 0, .125)",
        }
      }],
       
    }  
});













var ctx = document.getElementById('radarChart').getContext('2d');
var myChart = new Chart(ctx, {
    type: 'radar',
    data: {
      labels: [{% for item in today_items %}'{{ item.name }}',{% endfor %}],
      datasets: [{
          label: 'Price',
          data: [{% for item in today_items %}{{ item.price }},{% endfor %}],
          backgroundColor: [
              'rgba(255, 99, 132, 0.2)',
              'rgba(54, 162, 235, 0.2)',
              'rgba(255, 206, 86, 0.2)',
              'rgba(75, 192, 192, 0.2)',
              'rgba(153, 102, 255, 0.2)',
              'rgba(255, 159, 64, 0.2)'
          ],
          borderColor: [
              'rgba(255, 99, 132, 1)',
              'rgba(54, 162, 235, 1)',
              'rgba(255, 206, 86, 1)',
              'rgba(75, 192, 192, 1)',
              'rgba(153, 102, 255, 1)',
              'rgba(255, 159, 64, 1)'
          ],
          borderWidth: 1
      }]
  },
    options: {
        scales: {
            y: {
                beginAtZero: true
            },
            gridLines: {
          display: false
        }
        },
         xAxes: [{
        ticks: {
          min: 0,
        },
        gridLines: {
          color: "rgba(0, 0, 0, .125)",
        }
      }],
       
    }  
});



var ctx = document.getElementById('doughnutChart').getContext('2d');
var myChart = new Chart(ctx, {
    type: 'doughnut',
    data: {
      labels: [{% for item in today_items %}'{{ item.name }}',{% endfor %}],
      datasets: [{
          label: 'Price',
          data: [{% for item in today_items %}{{ item.price }},{% endfor %}],
          backgroundColor: [
              'rgba(255, 99, 132, 0.2)',
              'rgba(54, 162, 235, 0.2)',
              'rgba(255, 206, 86, 0.2)',
              'rgba(75, 192, 192, 0.2)',
              'rgba(153, 102, 255, 0.2)',
              'rgba(255, 159, 64, 0.2)'
          ],
          borderColor: [
              'rgba(255, 99, 132, 1)',
              'rgba(54, 162, 235, 1)',
              'rgba(255, 206, 86, 1)',
              'rgba(75, 192, 192, 1)',
              'rgba(153, 102, 255, 1)',
              'rgba(255, 159, 64, 1)'
          ],
          borderWidth: 1
      }]
  },
    options: {
        scales: {
            y: {
                beginAtZero: true
            },
            gridLines: {
          display: false
        }
        },
         xAxes: [{
        ticks: {
          min: 0,
        },
        gridLines: {
          color: "rgba(0, 0, 0, .125)",
        }
      }],
       
    }  
});




var ctx = document.getElementById('polarArea').getContext('2d');
var myChart = new Chart(ctx, {
    type: 'polarArea',
    data: {
      labels: [{% for item in today_items %}'{{ item.name }}',{% endfor %}],
      datasets: [{
          label: 'Price',
          data: [{% for item in today_items %}{{ item.price }},{% endfor %}],
          backgroundColor: [
              'rgba(255, 99, 132, 0.2)',
              'rgba(54, 162, 235, 0.2)',
              'rgba(255, 206, 86, 0.2)',
              'rgba(75, 192, 192, 0.2)',
              'rgba(153, 102, 255, 0.2)',
              'rgba(255, 159, 64, 0.2)'
          ],
          borderColor: [
              'rgba(255, 99, 132, 1)',
              'rgba(54, 162, 235, 1)',
              'rgba(255, 206, 86, 1)',
              'rgba(75, 192, 192, 1)',
              'rgba(153, 102, 255, 1)',
              'rgba(255, 159, 64, 1)'
          ],
          borderWidth: 1
      }]
  },
    options: {
        scales: {
            y: {
                beginAtZero: true
            },
            gridLines: {
          display: false
        }
        },
         xAxes: [{
        ticks: {
          min: 0,
        },
        gridLines: {
          color: "rgba(0, 0, 0, .125)",
        }
      }],
       
    }  
});

{% comment %} 

var ctx = document.getElementById('Scatter').getContext('2d');
var myChart = new Chart(ctx, {
    type: 'scatter',
    data: {
      labels: [{% for item in today_items %}'{{ item.name }}',{% endfor %}],
      datasets: [{
          label: 'Price',
          data: [{% for item in today_items %}{{ item.price }},{% endfor %}],
          backgroundColor: [
              'rgba(255, 99, 132, 0.2)',
              'rgba(54, 162, 235, 0.2)',
              'rgba(255, 206, 86, 0.2)',
              'rgba(75, 192, 192, 0.2)',
              'rgba(153, 102, 255, 0.2)',
              'rgba(255, 159, 64, 0.2)'
          ],
          borderColor: [
              'rgba(255, 99, 132, 1)',
              'rgba(54, 162, 235, 1)',
              'rgba(255, 206, 86, 1)',
              'rgba(75, 192, 192, 1)',
              'rgba(153, 102, 255, 1)',
              'rgba(255, 159, 64, 1)'
          ],
          borderWidth: 1
      }]
  },
    options: {
        scales: {
            y: {
                beginAtZero: true
            },
            gridLines: {
          display: false
        }
        },
         xAxes: [{
        ticks: {
          min: 0,
        },
        gridLines: {
          color: "rgba(0, 0, 0, .125)",
        }
      }],
       
    }  
});



var ctx = document.getElementById('bubbleChart').getContext('2d');
var myChart = new Chart(ctx, {
    type: 'bubble',
    data: {
      labels: [{% for item in today_items %}'{{ item.name }}',{% endfor %}],
      datasets: [{
          label: 'Price',
          data: [{% for item in today_items %}{{ item.price }},{% endfor %}],
          backgroundColor: [
              'rgba(255, 99, 132, 0.2)',
              'rgba(54, 162, 235, 0.2)',
              'rgba(255, 206, 86, 0.2)',
              'rgba(75, 192, 192, 0.2)',
              'rgba(153, 102, 255, 0.2)',
              'rgba(255, 159, 64, 0.2)'
          ],
          borderColor: [
              'rgba(255, 99, 132, 1)',
              'rgba(54, 162, 235, 1)',
              'rgba(255, 206, 86, 1)',
              'rgba(75, 192, 192, 1)',
              'rgba(153, 102, 255, 1)',
              'rgba(255, 159, 64, 1)'
          ],
          borderWidth: 1
      }]
  },
    options: {
        scales: {
            y: {
                beginAtZero: true
            },
            gridLines: {
          display: false
        }
        },
         xAxes: [{
        ticks: {
          min: 0,
        },
        gridLines: {
          color: "rgba(0, 0, 0, .125)",
        }
      }],
       
    }  
});







 {% endcomment %}




































































</script>

{% endblock script %}

{% block content %}

<div class="container">
    {% if today_items %}
<!--  <div class="main">-->
    <div class="row main-row">
      <div class="col-6">
        <table>
          <thead>
            <tr>
              <th>#</th>
              <th>Name</th>
              <th>Price</th>
              <th>Action</th>
            </tr>
          </thead>

          <tbody>
          {% for item in today_items %}
          
            <tr>
              <th scope="row">{{forloop.counter}}</th>
              <td>{{item.name}}</td>
              <td>{{ item.price }}</td>
              <td><a class="btn btn-primary" href="{% url 'update' item.pk %}">Edit</a>
              <a id="delete" class="btn btn-danger" href="{% url 'delete' item.pk %}">Delete</a></td>
            </tr>
          
          {% endfor %}
          </tbody>
          <tfoot>
            <tr>
              <th id="total" colspan="4"><span>Total: {{ today_total }}</span></th>
            </tr>
        </tfoot>
        </table>

        <div>
          <a class="btn btn-success btn-lg btn-block" href="{% url 'add_item' %}">Add</a>
        </div>
      </div>

      <!-- Today Chart  -->
      <div class="col-6">
        <div class="chart">
           <canvas id="myChart" width="400" height="400"></canvas>
        </div>
      </div>
    </div>

    <hr class="mid-hr">



    </div>

    </div>

{% else %}
       <div class="d-flex justify-content-center">
          <h1>Start Your Day</h1>
       </div>
       <div class="row main-row">
         <div class="col-6 mx-auto">
           <span class="d-flex justify-content-center m-2">You do not have any item today</span>
           <a class="btn btn-success btn-lg btn-block" href="{% url 'add_item' %}">Add</a>
         </div>
       </div>
{% endif %}

<div class="container">

  <div class="row mt-4">
  
  {% comment %} Bar Chart {% endcomment %}
  <div class="col-md-6">
  <div class="border p-4 mx-1 my-1">
  <h4 style="text-align: center" class="text-muted">Bar Chart</h4>
  <canvas id="barChart" width="400" height="200"></canvas>
  </div>
  </div>
  
  {% comment %} Line Chart {% endcomment %}
  <div class="col-md-6">
  <div class="border p-4 mx-1 my-1">
  <h4 style="text-align: center" class="text-muted">Line Chart</h4>
  <canvas id="lineChart" width="400" height="200"></canvas>
  </div>
  </div>
  
  {% comment %} Pie Chart {% endcomment %}
  
  
  {% comment %} Radar Chart {% endcomment %}
  <div class="col-md-6">
  <div class="border p-4 mx-1 my-1">
  <h4  style="text-align: center" class="text-muted">Radar Chart</h4>
  <canvas id="radarChart" width="400" height="200"></canvas>
  </div>
  </div>
  
  {% comment %} doughnut Chart {% endcomment %}
  <div class="col-md-6">
  <div class="border p-4 mx-1 my-1">
  <h4 style="text-align: center" class="text-muted">Doughnut Chart</h4>
  <canvas id="doughnutChart" width="400" height="200"></canvas>
  </div>
  </div>
  
  {% comment %} Polar Area {% endcomment %}
  <div class="col-md-6">
  <div class="border p-4 mx-1 my-1">
  <h4 style="text-align: center" class="text-muted">Polar Area</h4>
  <canvas id="polarArea" width="400" height="200"></canvas>
  </div>
  </div>
  
{% comment %}   
  <div class="col-md-6">
    <div class="border p-4 mx-1 my-1">
    <h4 style="text-align: center"  class="text-muted">Scatter Area</h4>
    <canvas id="Scatter" width="400" height="200"></canvas>
    </div>
    </div>





    <div class="col-md-6">
      <div class="border p-4 mx-1 my-1">
      <h4 style="text-align: center"  class="text-muted">Bubble </h4>
      <canvas id="bubbleChart" width="400" height="200"></canvas>
      </div>
      </div> {% endcomment %}
  
  
  
  </div>
  </div>
{% endblock content %}